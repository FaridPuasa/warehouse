<!DOCTYPE html>
<html lang="en">
<head>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/public/style.css">
    <title>Login</title>
</head>
<body>

  <ul>
    <li><a href="/">Zalora Main</a></li>
    <li><a href="/itemin">Zalora In</a></li>
    <li><a href="/itemout">Zalora POD</a></li>
    <li><a href="/reentry">Re-Entry</a></li>
    <li><a href="/pharmacyin">Pharmacy Inventory</a></li>
    <li><a href="/pharmacyout">Pharmacy POD</a></li>
    <li><a href="/grpmy">GRP Malaysia</a></li>
    <li><a href="/dispatch">Dispatcher Report</a></li>
    <li><a href="/central">General Tracker</a></li>
  </ul>

<table>
  <thead>
    <tr>
      <th scope = "col">Tracking Number</th>
      <th scope = "col">Name</th>
      <th scope = "col">Address</th>
      <th scope = "col">Contact</th>
      <th scope = "col">Value</th>
      <th scope = "col">Status</th>
      <th scope = "col">Entry Date</th>
      <th scope = "col">Expire Date</th>
      <th scope = "col">Ageing</th>
    </tr>
  </thead>


  <%itemList.forEach(zaloraInventory => {%>
        <tbody>
          <tr class="content">
            <th scope="row"><%= zaloraInventory.trackingNumber %></th>
            <td><%= zaloraInventory.name %></td>
            <td><%= zaloraInventory.address %></td>
            <td><%= zaloraInventory.contact1 %></td>
            <td><%= zaloraInventory.value %></td>
            <td><%= zaloraInventory.status %></td>
            <td><%= zaloraInventory.entryDate %></td>
            <td class="expire"><%= zaloraInventory.expireDate %></td>
            <td class="days"><%= zaloraInventory.age %></td>
          </tr>
        </tbody>
   <%})%>
  </table>

   <script>

        let dateEntry = document.getElementById('dateEntry').value; //08/25/2020

        let today = new Date();

        if (today.getDate() < 0){
           todayDay = "0" + today.getDate();
        } else {
            todayDay = today.getDate();
        }

        let todayDate = (today.getMonth() + 1) + '/' + todayDay + '/' + today.getFullYear();

        let age = Math.abs(todayDate-dateEntry);
        let ageDisplay = age/(1000 * 3600 * 24)

        console.log(ageDisplay)

   </script>

   <script>
      let expire = document.querySelectorAll('.expire').innerHTML
      let expireDate = Date.parse(expire)
      //console.log(expireDate)
      //console.log(Date.parse(new Date()))
      
      let value = expireDate - Date.parse(new Date())
      let days = Math.round(value /(60*60*24*1000))
      document.querySelectorAll('.days').innerHTML = days + " Days"
      console.log(days)
   </script>
   
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
</body>
</html>

